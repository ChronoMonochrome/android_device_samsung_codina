From a0943bd277ed9b5ecaf1c7c1ace7590b1b6da37d Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH] soong_config: Add BOARD_EGL_WORKAROUND_BUG_10194508 variable

* Soong product variable 'Needs_egl_khr_workaround product variable'

diff --git a/build/soong/android/variable.go b/build/soong/android/variable.go
index 188d803..b322d70 100644
--- a/build/soong/android/variable.go
+++ b/build/soong/android/variable.go
@@ -6,6 +6,9 @@
 	Uses_non_treble_camera struct {
 		Cflags []string
 	}
+	Needs_egl_khr_workaround struct {
+		Cflags []string
+	}
 	Needs_text_relocations struct {
 		Cppflags []string
 	}
@@ -30,6 +33,7 @@
 type ProductVariables struct {
 	Has_legacy_camera_hal1  *bool `json:",omitempty"`
 	Uses_non_treble_camera  *bool `json:",omitempty"`
+	Needs_egl_khr_workaround  *bool `json:",omitempty"`
 	Needs_text_relocations  *bool `json:",omitempty"`
 	Specific_camera_parameter_library  *string `json:",omitempty"`
 	Target_shim_libs  *string `json:",omitempty"`
diff --git a/build/soong/soong_config.mk b/build/soong/soong_config.mk
index 9bff104..a032db4 100644
--- a/build/soong/soong_config.mk
+++ b/build/soong/soong_config.mk
@@ -6,6 +6,7 @@
 	echo '"Lineage": {'; \
 	echo '    "Has_legacy_camera_hal1": $(if $(filter true,$(TARGET_HAS_LEGACY_CAMERA_HAL1)),true,false),'; \
 	echo '    "Uses_non_treble_camera": $(if $(filter true,$(TARGET_USES_NON_TREBLE_CAMERA)),true,false),'; \
+	echo '    "Needs_egl_khr_workaround": $(if $(filter true,$(BOARD_EGL_WORKAROUND_BUG_10194508)),true,false),'; \
 	echo '    "Needs_text_relocations": $(if $(filter true,$(TARGET_NEEDS_PLATFORM_TEXT_RELOCATIONS)),true,false),'; \
 	echo '    "Specific_camera_parameter_library": "$(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY)",'; \
 	echo '    "Target_shim_libs": "$(subst $(space),:,$(TARGET_LD_SHIM_LIBS))",'; \
