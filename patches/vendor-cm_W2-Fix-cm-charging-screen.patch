diff --git a/charger/Android.mk b/charger/Android.mk
index 9fed3dd..4480ec7 100644
--- a/charger/Android.mk
+++ b/charger/Android.mk
@@ -1,4 +1,5 @@
-LOCAL_PATH := $(call my-dir)
+ifneq ($(WITH_CM_CHARGER),false)
+LOCAL_PATH := $(call my-dir)
 
 include $(CLEAR_VARS)
 LOCAL_SRC_FILES := healthd_board_cm.cpp
@@ -53,4 +54,5 @@
 include $(BUILD_PHONY_PACKAGE)
 
 _add-charger-image :=
-_img_modules :=
+_img_modules :=
+endif
