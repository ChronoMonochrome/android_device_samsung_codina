From 8f69234c1196357a494b34db6d0cc8940c5da6b3 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH 291/296] Fix SecurityException: MODE_WORLD_READABLE no longer
 supported

---
 core/java/android/app/ContextImpl.java | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/core/java/android/app/ContextImpl.java b/core/java/android/app/ContextImpl.java
index 5f3432264ca..d20b4f2f02e 100644
--- a/core/java/android/app/ContextImpl.java
+++ b/core/java/android/app/ContextImpl.java
@@ -2417,10 +2417,14 @@ class ContextImpl extends Context {
     private void checkMode(int mode) {
         if (getApplicationInfo().targetSdkVersion >= Build.VERSION_CODES.N) {
             if ((mode & MODE_WORLD_READABLE) != 0) {
-                throw new SecurityException("MODE_WORLD_READABLE no longer supported");
+                if (mode == 0) {
+                    throw new SecurityException("MODE_WORLD_READABLE no longer supported");
+                }
             }
             if ((mode & MODE_WORLD_WRITEABLE) != 0) {
-                throw new SecurityException("MODE_WORLD_WRITEABLE no longer supported");
+                if (mode == 0) {
+                    throw new SecurityException("MODE_WORLD_WRITEABLE no longer supported");
+                }
             }
         }
     }
-- 
2.11.0

