From a0943bd277ed9b5ecaf1c7c1ace7590b1b6da37d Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH] Native crash occurs. android.renderscript.Script#setVer()

Bug Details:
If null is specified for the argument dims of android.renderscript.Script#setVer(),
Native crash occurs without RSIllegalArgumentException being thrown

Modification:
Implemented to throw RSIllegalArgumentException if the argument dims of the setVer() method is null.

diff --git a/rs/java/android/renderscript/Script.java b/rs/java/android/renderscript/Script.java
old mode 100644
new mode 100755
index d0d9a11..5fc3c60
--- a/rs/java/android/renderscript/Script.java
+++ b/rs/java/android/renderscript/Script.java
@@ -450,6 +450,10 @@
      *
      */
     public void setVar(int index, FieldPacker v, Element e, int[] dims) {
+        if (dims == null) {
+            throw new RSIllegalArgumentException(
+                "dims should to be non-null.");
+        }
         mRS.nScriptSetVarVE(getID(mRS), index, v.getData(), e.getID(mRS), dims);
     }
 
