From b45d7924f5333bfc0e3ed1cac14f2a4dd465d492 Mon Sep 17 00:00:00 2001
From: Mark Lu <Mark_Lu@htc.com>
Date: Mon, 21 Nov 2016 15:38:13 +0800
Subject: [PATCH 027/296] SystemUI: fix the monkey crash issue

A runtime exception occurred while executing doInBackground, result
in by passing a null object to Log printer, adding part of message
to avoid null exception.
---
 .../com/android/systemui/statusbar/policy/SecurityControllerImpl.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/policy/SecurityControllerImpl.java b/packages/SystemUI/src/com/android/systemui/statusbar/policy/SecurityControllerImpl.java
index b22ce1822ac..fda7653aab5 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/policy/SecurityControllerImpl.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/policy/SecurityControllerImpl.java
@@ -402,7 +402,9 @@ public class SecurityControllerImpl extends CurrentUserTracker implements Securi
                 boolean hasCACerts = !(conn.getService().getUserCaAliases().getList().isEmpty());
                 return new Pair<Integer, Boolean>(userId[0], hasCACerts);
             } catch (RemoteException | InterruptedException | AssertionError e) {
-                Log.i(TAG, e.getMessage());
+                if (e != null && e.getMessage() != null) {
+                    Log.i(TAG, e.getMessage());
+                }
                 new Handler(Dependency.get(Dependency.BG_LOOPER)).postDelayed(
                         () -> new CACertLoader().execute(userId[0]),
                         CA_CERT_LOADING_RETRY_TIME_IN_MS);
-- 
2.11.0

