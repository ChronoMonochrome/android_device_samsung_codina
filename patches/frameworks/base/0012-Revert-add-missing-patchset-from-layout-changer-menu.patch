From 6d49053b6df485497c3657835c1c551de5a08049 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 25 Jan 2016 01:03:12 +0700
Subject: [PATCH 12/64] Revert "add missing patchset from layout changer menu
 key handling"

This reverts commit 1c48e057e3e9d7e604dbb100ab1e96859a2e87c1.
---
 .../android/systemui/statusbar/phone/NavigationBarView.java    | 10 +---------
 .../systemui/statusbar/policy/LayoutChangerButtonView.java     |  4 ++--
 2 files changed, 3 insertions(+), 11 deletions(-)

diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java b/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java
index 24fdcc8..e2b8746 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java
@@ -350,10 +350,6 @@ public class NavigationBarView extends LinearLayout {
         return mCurrentView.findViewWithTag(AwesomeConstant.ACTION_LAYOUT_RIGHT.value());
     }
 
-    public View getMenuButtonFromString() {
-        return mCurrentView.findViewWithTag(AwesomeConstant.ACTION_MENU.value());
-    }
-
     public View getMenuButton() {
         return mCurrentView.findViewById(mMenuButtonId);
     }
@@ -642,11 +638,7 @@ public class NavigationBarView extends LinearLayout {
 
         if (mButtonLayouts > 1 && mLegacyMenu) {
             if (getRightLayoutButton() != null) {
-                ((LayoutChangerButtonView) getRightLayoutButton()).setMenuAction(
-                        mShowMenu, getResources().getConfiguration().orientation, mTablet);
-            } else if (getMenuButtonFromString() != null) {
-                ((LayoutChangerButtonView) getMenuButtonFromString()).setMenuAction(
-                        mShowMenu, getResources().getConfiguration().orientation, mTablet);
+                ((LayoutChangerButtonView) getRightLayoutButton()).setMenuAction(mShowMenu, isVertical(), mTablet);
             }
         } else {
             if (getMenuButton() != null) {
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/policy/LayoutChangerButtonView.java b/packages/SystemUI/src/com/android/systemui/statusbar/policy/LayoutChangerButtonView.java
index 2938bb4..2645d73 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/policy/LayoutChangerButtonView.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/policy/LayoutChangerButtonView.java
@@ -60,7 +60,7 @@ public class LayoutChangerButtonView extends KeyButtonView {
         setImage();
     }
 
-    public void setMenuAction(boolean show, int isVertical, boolean isTablet) {
+    public void setMenuAction(boolean show, boolean isVertical, boolean isTablet) {
         if (show) {
             mActions.singleAction = ACTION_MENU;
             setImageResource(R.drawable.ic_sysbar_menu);
@@ -69,7 +69,7 @@ public class LayoutChangerButtonView extends KeyButtonView {
             if (isTablet) {
                 setImageResource(R.drawable.ic_sysbar_layout_right);
             } else {
-                setImageResource(isVertical != 1
+                setImageResource(!isVertical
                         ? R.drawable.ic_sysbar_layout_right_landscape
                         : R.drawable.ic_sysbar_layout_right);
             }
-- 
2.5.0

