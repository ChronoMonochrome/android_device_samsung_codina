From 6a8912a1feca134273163cdc4e132193df04675f Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH 252/296] Fix binderDied NetworkRequest

---
 services/core/java/com/android/server/ConnectivityService.java | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/services/core/java/com/android/server/ConnectivityService.java b/services/core/java/com/android/server/ConnectivityService.java
index d81adc2ab0c..67a400e1789 100644
--- a/services/core/java/com/android/server/ConnectivityService.java
+++ b/services/core/java/com/android/server/ConnectivityService.java
@@ -4027,10 +4027,12 @@ public class ConnectivityService extends IConnectivityManager.Stub
             mPendingIntent = null;
             enforceRequestCountLimit();
 
-            try {
-                mBinder.linkToDeath(this, 0);
-            } catch (RemoteException e) {
-                binderDied();
+            if (mBinder != null) {
+               try {
+                   mBinder.linkToDeath(this, 0);
+               } catch (RemoteException e) {
+                   binderDied();
+               }
             }
         }
 
-- 
2.11.0

