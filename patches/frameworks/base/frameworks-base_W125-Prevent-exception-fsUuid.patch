From a0943bd277ed9b5ecaf1c7c1ace7590b1b6da37d Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH] StorageManager: Prevent exception when fsUuid is not passed as UUID

diff --git a/core/java/android/os/storage/StorageManager.java b/core/java/android/os/storage/StorageManager.java
index 8533c7efad84d..c23fd04366eef 100644
--- a/core/java/android/os/storage/StorageManager.java
+++ b/core/java/android/os/storage/StorageManager.java
@@ -781,6 +781,8 @@ public boolean isAllocationSupported(@NonNull FileDescriptor fd) {
             return true;
         } catch (IOException e) {
             return false;
+        } catch (IllegalArgumentException e) {
+            return false;
         }
     }
 
