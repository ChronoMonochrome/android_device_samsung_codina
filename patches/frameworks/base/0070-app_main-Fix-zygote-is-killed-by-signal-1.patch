From d97094300971fab1f2288e5ac38c4e7814383149 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH 070/296] app_main: Fix "zygote is killed by signal 1"

ignore the signal SIGHUP
---
 cmds/app_process/app_main.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/cmds/app_process/app_main.cpp b/cmds/app_process/app_main.cpp
index 1671337511b..640f5dd6407 100644
--- a/cmds/app_process/app_main.cpp
+++ b/cmds/app_process/app_main.cpp
@@ -7,6 +7,7 @@
 
 #define LOG_TAG "appproc"
 
+#include <signal.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <sys/prctl.h>
@@ -347,6 +348,7 @@ int main(int argc, char* const argv[])
     }
 
     if (zygote) {
+        signal(SIGHUP, SIG_IGN);
         runtime.start("com.android.internal.os.ZygoteInit", args, zygote);
     } else if (className) {
         runtime.start("com.android.internal.os.RuntimeInit", args, zygote);
-- 
2.11.0

