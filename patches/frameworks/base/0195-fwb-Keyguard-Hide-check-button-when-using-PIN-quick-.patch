From 8e9595375fa8c4ea09a94226023d92a6521b89e7 Mon Sep 17 00:00:00 2001
From: carlosavignano <carlosavignano@aospa.co>
Date: Fri, 9 Mar 2018 04:08:46 +0000
Subject: [PATCH 195/296] fwb: Keyguard: Hide check button when using PIN quick
 unlock

---
 .../SystemUI/src/com/android/keyguard/KeyguardPINView.java    |  2 ++
 .../src/com/android/keyguard/KeyguardPinBasedInputView.java   | 11 +++++++++++
 .../SystemUI/src/com/android/keyguard/KeyguardSimPinView.java |  2 ++
 .../SystemUI/src/com/android/keyguard/KeyguardSimPukView.java |  2 ++
 4 files changed, 17 insertions(+)

diff --git a/packages/SystemUI/src/com/android/keyguard/KeyguardPINView.java b/packages/SystemUI/src/com/android/keyguard/KeyguardPINView.java
index e67a91cb959..b20b66cfccc 100644
--- a/packages/SystemUI/src/com/android/keyguard/KeyguardPINView.java
+++ b/packages/SystemUI/src/com/android/keyguard/KeyguardPINView.java
@@ -161,6 +161,8 @@ public class KeyguardPINView extends KeyguardPinBasedInputView {
         } else {
             mPasswordEntry.setQuickUnlockListener(null);
         }
+
+        setButtonVisibility(getOkButton(), !quickUnlock);
     }
 
     @Override
diff --git a/packages/SystemUI/src/com/android/keyguard/KeyguardPinBasedInputView.java b/packages/SystemUI/src/com/android/keyguard/KeyguardPinBasedInputView.java
index c04ae68dab3..6dca81714aa 100644
--- a/packages/SystemUI/src/com/android/keyguard/KeyguardPinBasedInputView.java
+++ b/packages/SystemUI/src/com/android/keyguard/KeyguardPinBasedInputView.java
@@ -51,6 +51,17 @@ public abstract class KeyguardPinBasedInputView extends KeyguardAbsKeyInputView
         super(context, attrs);
     }
 
+    public void setButtonVisibility(View button, boolean visible) {
+        if (button instanceof View && button != null) {
+            button.setVisibility(
+                    visible ? View.VISIBLE : View.INVISIBLE);
+        }
+    }
+
+    public View getOkButton() {
+        return mOkButton;
+    }
+
     @Override
     public void reset() {
         mPasswordEntry.requestFocus();
diff --git a/packages/SystemUI/src/com/android/keyguard/KeyguardSimPinView.java b/packages/SystemUI/src/com/android/keyguard/KeyguardSimPinView.java
index 98274a68db3..47f40e835e5 100644
--- a/packages/SystemUI/src/com/android/keyguard/KeyguardSimPinView.java
+++ b/packages/SystemUI/src/com/android/keyguard/KeyguardSimPinView.java
@@ -167,7 +167,9 @@ public class KeyguardSimPinView extends KeyguardPinBasedInputView {
             ((EmergencyCarrierArea) mEcaView).setCarrierTextVisible(true);
         }
         mSimImageView = findViewById(R.id.keyguard_sim);
+
         mPasswordEntry.setQuickUnlockListener(null);
+        setButtonVisibility(getOkButton(), true /* visible */);
     }
 
     @Override
diff --git a/packages/SystemUI/src/com/android/keyguard/KeyguardSimPukView.java b/packages/SystemUI/src/com/android/keyguard/KeyguardSimPukView.java
index fb7a7d642a1..343bd68b394 100644
--- a/packages/SystemUI/src/com/android/keyguard/KeyguardSimPukView.java
+++ b/packages/SystemUI/src/com/android/keyguard/KeyguardSimPukView.java
@@ -216,7 +216,9 @@ public class KeyguardSimPukView extends KeyguardPinBasedInputView {
             ((EmergencyCarrierArea) mEcaView).setCarrierTextVisible(true);
         }
         mSimImageView = findViewById(R.id.keyguard_sim);
+
         mPasswordEntry.setQuickUnlockListener(null);
+        setButtonVisibility(getOkButton(), true);
     }
 
     @Override
-- 
2.11.0

