From 997be98939ddc3a74bfd850325628ea5f2732fb7 Mon Sep 17 00:00:00 2001
From: Ralph Bergmann <ralph@the4thfloor.eu>
Date: Mon, 20 Apr 2015 21:24:29 +0200
Subject: [PATCH 018/296] fix NPE in TextUtils

return false if String is null or empty. Fix NPE too.

see https://code.google.com/p/android/issues/detail?id=24965
---
 core/java/android/text/TextUtils.java | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/core/java/android/text/TextUtils.java b/core/java/android/text/TextUtils.java
index 3e64af47c27..ee76eee5f0f 100644
--- a/core/java/android/text/TextUtils.java
+++ b/core/java/android/text/TextUtils.java
@@ -1691,6 +1691,9 @@ public class TextUtils {
      * Returns whether the given CharSequence contains only digits.
      */
     public static boolean isDigitsOnly(CharSequence str) {
+        if (isEmpty(str)) {
+            return false;
+        }
         final int len = str.length();
         for (int cp, i = 0; i < len; i += Character.charCount(cp)) {
             cp = Character.codePointAt(str, i);
-- 
2.11.0

