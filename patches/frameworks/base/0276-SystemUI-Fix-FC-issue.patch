From 55cfa9a16cd7b11f135223fa98a679661e23d212 Mon Sep 17 00:00:00 2001
From: Weijie Wang <weijiew@codeaurora.org>
Date: Sun, 11 Feb 2018 16:35:22 +0800
Subject: [PATCH 276/296] SystemUI: Fix FC issue

Root case:Sometime during stress test,the PendingIntent of next alarm is null
Solution: avoid referring null PendingIntent
---
 packages/SystemUI/src/com/android/systemui/qs/QSFooterImpl.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/packages/SystemUI/src/com/android/systemui/qs/QSFooterImpl.java b/packages/SystemUI/src/com/android/systemui/qs/QSFooterImpl.java
index ffc30ce61d9..dca08126d36 100644
--- a/packages/SystemUI/src/com/android/systemui/qs/QSFooterImpl.java
+++ b/packages/SystemUI/src/com/android/systemui/qs/QSFooterImpl.java
@@ -374,7 +374,7 @@ public class QSFooterImpl extends FrameLayout implements QSFooter,
         } else if (v == mDateTimeGroup) {
             Dependency.get(MetricsLogger.class).action(ACTION_QS_DATE,
                     mNextAlarm != null);
-            if (mNextAlarm != null) {
+            if (mNextAlarm != null && mNextAlarm.getShowIntent() != null) {
                 PendingIntent showIntent = mNextAlarm.getShowIntent();
                 mActivityStarter.startPendingIntentDismissingKeyguard(showIntent);
             } else {
-- 
2.11.0

