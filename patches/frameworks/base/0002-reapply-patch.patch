From 34e8aed9eeb2148bd40a9923fce68367c55caf24 Mon Sep 17 00:00:00 2001
From: Dhoine <nikolaikolyago@gmail.com>
Date: Fri, 29 May 2015 14:17:36 +0300
Subject: [PATCH 2/3] reapply patch

Change-Id: Ic317b7dd951f7ced9bf547244863ac56900a142d
---
 libs/hwui/LayerRenderer.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/libs/hwui/LayerRenderer.cpp b/libs/hwui/LayerRenderer.cpp
index 006d145..8247a31 100644
--- a/libs/hwui/LayerRenderer.cpp
+++ b/libs/hwui/LayerRenderer.cpp
@@ -194,6 +194,12 @@ Layer* LayerRenderer::createLayer(uint32_t width, uint32_t height, bool isOpaque
         return NULL;
     }
 
+    if (width == 0 && height == 0) {		
+        ALOGW("Trying to obtain a zero-size layer, setting fall-back size 512x768");		
+        width = 512;		
+        height = 768;
+    }
+	
     caches.activeTexture(0);
     Layer* layer = caches.layerCache.get(width, height);
     if (!layer) {
-- 
1.9.1

