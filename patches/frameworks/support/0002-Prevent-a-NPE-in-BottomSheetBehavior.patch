From 3a45c506a88dec05fa54f4d055f897ee567589f6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Geoffrey=20M=C3=A9tais?= <geoffrey.metais@gmail.com>
Date: Tue, 14 Feb 2017 10:29:35 +0100
Subject: [PATCH 2/2] Prevent a NPE in BottomSheetBehavior

---
 design/src/android/support/design/widget/BottomSheetBehavior.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/design/src/android/support/design/widget/BottomSheetBehavior.java b/design/src/android/support/design/widget/BottomSheetBehavior.java
index aaa9b80..a807f41 100644
--- a/design/src/android/support/design/widget/BottomSheetBehavior.java
+++ b/design/src/android/support/design/widget/BottomSheetBehavior.java
@@ -296,7 +296,7 @@ public class BottomSheetBehavior<V extends View> extends CoordinatorLayout.Behav
         // We have to handle cases that the ViewDragHelper does not capture the bottom sheet because
         // it is not the top most view of its parent. This is not necessary when the touch event is
         // happening over the scrolling content as nested scrolling logic handles that case.
-        View scroll = mNestedScrollingChildRef.get();
+        View scroll = mNestedScrollingChildRef != null ? mNestedScrollingChildRef.get() : null;
         return action == MotionEvent.ACTION_MOVE && scroll != null &&
                 !mIgnoreEvents && mState != STATE_DRAGGING &&
                 !parent.isPointInChildBounds(scroll, (int) event.getX(), (int) event.getY()) &&
-- 
2.11.0

