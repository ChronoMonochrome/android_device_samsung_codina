From a5334615e47e3da1b07e1eba7a609e9550658ac0 Mon Sep 17 00:00:00 2001
From: Praveen Chavan <pchavan@codeaurora.org>
Date: Wed, 16 Sep 2015 11:20:00 -0700
Subject: [PATCH 09/12] libgui: assign handle to NULL after free

to avoid use-after-free situations

Change-Id: If9c09f509bc55795856302e5ca34470df019c622
---
 libs/ui/GraphicBuffer.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/libs/ui/GraphicBuffer.cpp b/libs/ui/GraphicBuffer.cpp
index e55db30..0d77727 100644
--- a/libs/ui/GraphicBuffer.cpp
+++ b/libs/ui/GraphicBuffer.cpp
@@ -112,6 +112,7 @@ void GraphicBuffer::free_handle()
         GraphicBufferAllocator& allocator(GraphicBufferAllocator::get());
         allocator.free(handle);
     }
+    handle = NULL;
     mWrappedBuffer = 0;
 }
 
-- 
2.5.0

