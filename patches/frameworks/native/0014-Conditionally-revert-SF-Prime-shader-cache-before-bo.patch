From 5502f8b214d851feebe3ba7ce78102e20cc37dec Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 5 Dec 2016 01:18:50 +0700
Subject: [PATCH 14/26] Conditionally revert "SF: Prime shader cache before
 boot animation"

credits: SergeyL@4pda.ru
---
 services/surfaceflinger/SurfaceFlinger.cpp      | 2 ++
 services/surfaceflinger/SurfaceFlinger_hwc1.cpp | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/services/surfaceflinger/SurfaceFlinger.cpp b/services/surfaceflinger/SurfaceFlinger.cpp
index 447cffa..965f1f6 100644
--- a/services/surfaceflinger/SurfaceFlinger.cpp
+++ b/services/surfaceflinger/SurfaceFlinger.cpp
@@ -529,7 +529,9 @@ void SurfaceFlinger::init() {
     // set initial conditions (e.g. unblank default device)
     initializeDisplays();
 
+#ifndef SHADER_CACHE_OFF
     mRenderEngine->primeCache();
+#endif
 
     // start boot animation
     startBootAnim();
diff --git a/services/surfaceflinger/SurfaceFlinger_hwc1.cpp b/services/surfaceflinger/SurfaceFlinger_hwc1.cpp
index fa6237c..bbbcf0a 100644
--- a/services/surfaceflinger/SurfaceFlinger_hwc1.cpp
+++ b/services/surfaceflinger/SurfaceFlinger_hwc1.cpp
@@ -575,7 +575,9 @@ void SurfaceFlinger::init() {
     // set initial conditions (e.g. unblank default device)
     initializeDisplays();
 
+#ifndef SHADER_CACHE_OFF
     mRenderEngine->primeCache();
+#endif
 
     // start boot animation
     startBootAnim();
-- 
2.9.3

