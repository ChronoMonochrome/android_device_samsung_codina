From 45195f3bbd312ed8263ef1e5f845692576e965ed Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 26 Dec 2016 19:45:54 +0700
Subject: [PATCH 43/46] frameworks-av_WW020-Added-null-check-for-memory.patch

Change-Id: Ie5c740a5a96e9489e0855646418e1a18af3e463a
---
 services/camera/libcameraservice/device1/CameraHardwareInterface.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/services/camera/libcameraservice/device1/CameraHardwareInterface.h b/services/camera/libcameraservice/device1/CameraHardwareInterface.h
index 1eff60f..5289255 100644
--- a/services/camera/libcameraservice/device1/CameraHardwareInterface.h
+++ b/services/camera/libcameraservice/device1/CameraHardwareInterface.h
@@ -363,6 +363,10 @@ public:
     void releaseRecordingFrame(const sp<IMemory>& mem)
     {
         ALOGV("%s(%s)", __FUNCTION__, mName.string());
+        if (mem == NULL) {
+             ALOGE("%s: NULL memory reference", __FUNCTION__);
+             return;
+        }
         if (mDevice->ops->release_recording_frame) {
             ssize_t offset;
             size_t size;
-- 
2.9.3

