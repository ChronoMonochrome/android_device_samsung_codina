From 7c391590edcb514753177e90dbdb336bb0de7652 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 26 Dec 2016 19:45:49 +0700
Subject: [PATCH 32/46] frameworks-av_WW003-Fix-memory-leak-MediaHTTP.patch

Change-Id: I50d5b25b92babeb3034b96d4ae89e7dfa539ea5c
---
 media/libstagefright/http/MediaHTTP.cpp | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/media/libstagefright/http/MediaHTTP.cpp b/media/libstagefright/http/MediaHTTP.cpp
index 5b18814..b10f8f7 100644
--- a/media/libstagefright/http/MediaHTTP.cpp
+++ b/media/libstagefright/http/MediaHTTP.cpp
@@ -216,6 +216,11 @@ void MediaHTTP::clearDRMState_l() {
         mDrmManagerClient->closeDecryptSession(mDecryptHandle);
         mDecryptHandle = NULL;
     }
+
+    if (mDrmManagerClient != NULL) {
+        delete mDrmManagerClient;
+        mDrmManagerClient = NULL;
+    }
 }
 
 }  // namespace android
-- 
2.9.3

