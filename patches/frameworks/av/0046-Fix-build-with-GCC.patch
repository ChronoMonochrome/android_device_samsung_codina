From 1be45460ea32c296a5dd19c349d3f990efe8572b Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Thu, 29 Dec 2016 01:31:15 +0700
Subject: [PATCH 46/46] Fix build with GCC

Change-Id: Ic49198685026c6094208c551805cb0333c080319
---
 camera/Android.mk                                      |  2 +-
 camera/cameraserver/Android.mk                         |  2 +-
 cmds/stagefright/Android.mk                            | 18 +++++++++---------
 drm/libmediadrm/Android.mk                             |  2 +-
 media/audioserver/Android.mk                           |  2 +-
 media/img_utils/src/Android.mk                         |  2 +-
 media/libcpustats/Android.mk                           |  2 +-
 media/libmedia/Android.mk                              |  4 ++--
 media/libmediaplayerservice/nuplayer/Android.mk        |  2 +-
 media/libmediaplayerservice/tests/Android.mk           |  2 +-
 media/libnbaio/Android.mk                              |  2 +-
 media/libstagefright/filters/Android.mk                |  2 +-
 media/libstagefright/foundation/Android.mk             |  2 +-
 media/libstagefright/http/Android.mk                   |  2 +-
 media/libstagefright/httplive/Android.mk               |  2 +-
 media/libstagefright/id3/Android.mk                    |  2 +-
 media/libstagefright/matroska/Android.mk               |  2 +-
 media/libstagefright/mpeg2ts/Android.mk                |  2 +-
 media/libstagefright/omx/Android.mk                    |  2 +-
 media/libstagefright/omx/tests/Android.mk              |  4 ++--
 media/libstagefright/rtsp/Android.mk                   |  4 ++--
 media/libstagefright/tests/Android.mk                  |  6 +++---
 media/libstagefright/timedtext/Android.mk              |  2 +-
 media/libstagefright/webm/Android.mk                   |  2 +-
 media/libstagefright/wifi-display/Android.mk           |  2 +-
 media/libstagefright/yuv/Android.mk                    |  2 +-
 media/mediaserver/Android.mk                           |  4 ++--
 media/mtp/Android.mk                                   |  2 +-
 media/ndk/Android.mk                                   |  2 +-
 media/utils/Android.mk                                 |  2 +-
 radio/Android.mk                                       |  2 +-
 services/audioflinger/Android.mk                       |  7 ++++---
 services/audioflinger/audio-resampler/Android.mk       |  2 +-
 services/audioflinger/tests/Android.mk                 |  4 ++--
 services/audiopolicy/Android.mk                        |  5 +++--
 .../audiopolicy/common/managerdefinitions/Android.mk   |  1 +
 services/audiopolicy/engineconfigurable/Android.mk     |  2 +-
 .../parameter-framework/plugin/Android.mk              |  2 +-
 .../audiopolicy/engineconfigurable/wrapper/Android.mk  |  2 +-
 services/audiopolicy/enginedefault/Android.mk          |  2 +-
 services/mediadrm/tests/Android.mk                     |  2 +-
 services/medialog/Android.mk                           |  2 +-
 services/mediaresourcemanager/Android.mk               |  2 +-
 services/mediaresourcemanager/test/Android.mk          |  4 ++--
 soundtrigger/Android.mk                                |  2 +-
 tools/resampler_tools/Android.mk                       |  2 +-
 46 files changed, 67 insertions(+), 64 deletions(-)

diff --git a/camera/Android.mk b/camera/Android.mk
index 8a32299..e1e0bf2 100644
--- a/camera/Android.mk
+++ b/camera/Android.mk
@@ -72,7 +72,7 @@ LOCAL_EXPORT_C_INCLUDE_DIRS := \
 	system/media/camera/include \
 	frameworks/av/include/camera
 
-LOCAL_CFLAGS += -Werror -Wall -Wextra
+LOCAL_CFLAGS +=  -Wall -Wextra
 
 ifneq ($(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY),)
 LOCAL_WHOLE_STATIC_LIBRARIES += $(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY)
diff --git a/camera/cameraserver/Android.mk b/camera/cameraserver/Android.mk
index aca7a19..b5d2c26 100644
--- a/camera/cameraserver/Android.mk
+++ b/camera/cameraserver/Android.mk
@@ -32,7 +32,7 @@ LOCAL_SHARED_LIBRARIES := \
 LOCAL_MODULE:= cameraserver
 LOCAL_32_BIT_ONLY := true
 
-LOCAL_CFLAGS += -Wall -Wextra -Werror -Wno-unused-parameter
+LOCAL_CFLAGS += -Wall -Wextra  -Wno-unused-parameter
 
 LOCAL_INIT_RC := cameraserver.rc
 
diff --git a/cmds/stagefright/Android.mk b/cmds/stagefright/Android.mk
index fa8e354..414766f 100644
--- a/cmds/stagefright/Android.mk
+++ b/cmds/stagefright/Android.mk
@@ -17,7 +17,7 @@ LOCAL_C_INCLUDES:= \
 	$(TOP)/frameworks/native/include/media/openmax \
 	external/jpeg \
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -46,7 +46,7 @@ LOCAL_C_INCLUDES += \
 	$(TOP)/frameworks/native/include/media/hardware
 endif
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -75,7 +75,7 @@ LOCAL_C_INCLUDES += \
 	$(TOP)/frameworks/native/include/media/hardware
 endif
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -100,7 +100,7 @@ LOCAL_C_INCLUDES:= \
 	frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -124,7 +124,7 @@ LOCAL_C_INCLUDES:= \
 	frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -148,7 +148,7 @@ LOCAL_C_INCLUDES:= \
 	frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -173,7 +173,7 @@ LOCAL_C_INCLUDES:= \
 	frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -216,7 +216,7 @@ LOCAL_C_INCLUDES += $(intermediates)
 LOCAL_STATIC_LIBRARIES:= \
 	libstagefright_mediafilter
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
@@ -240,7 +240,7 @@ LOCAL_C_INCLUDES:= \
 	frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE_TAGS := optional
diff --git a/drm/libmediadrm/Android.mk b/drm/libmediadrm/Android.mk
index 6a2ed31..8a567be 100644
--- a/drm/libmediadrm/Android.mk
+++ b/drm/libmediadrm/Android.mk
@@ -26,7 +26,7 @@ LOCAL_SHARED_LIBRARIES := \
 LOCAL_C_INCLUDES := \
     libcore/include
 
-LOCAL_CFLAGS += -Werror -Wno-error=deprecated-declarations -Wall
+LOCAL_CFLAGS +=  -Wno-error=deprecated-declarations -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE:= libmediadrm
diff --git a/media/audioserver/Android.mk b/media/audioserver/Android.mk
index 5ce1798..417b55b 100644
--- a/media/audioserver/Android.mk
+++ b/media/audioserver/Android.mk
@@ -54,6 +54,6 @@ LOCAL_MODULE := audioserver
 
 LOCAL_INIT_RC := audioserver.rc
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_EXECUTABLE)
diff --git a/media/img_utils/src/Android.mk b/media/img_utils/src/Android.mk
index 4074849..d6b4843 100644
--- a/media/img_utils/src/Android.mk
+++ b/media/img_utils/src/Android.mk
@@ -47,7 +47,7 @@ LOCAL_C_INCLUDES += \
 LOCAL_CFLAGS += \
   -Wall \
   -Wextra \
-  -Werror \
+   \
   -fvisibility=hidden
 
 ifneq ($(filter userdebug eng,$(TARGET_BUILD_VARIANT)),)
diff --git a/media/libcpustats/Android.mk b/media/libcpustats/Android.mk
index 57fe527..564cdde 100644
--- a/media/libcpustats/Android.mk
+++ b/media/libcpustats/Android.mk
@@ -8,6 +8,6 @@ LOCAL_SRC_FILES :=     \
 
 LOCAL_MODULE := libcpustats
 
-LOCAL_CFLAGS := -std=gnu++11 -Werror -Wall
+LOCAL_CFLAGS := -std=gnu++11  -Wall
 
 include $(BUILD_STATIC_LIBRARY)
diff --git a/media/libmedia/Android.mk b/media/libmedia/Android.mk
index df4e4b6..bd80c93 100644
--- a/media/libmedia/Android.mk
+++ b/media/libmedia/Android.mk
@@ -7,7 +7,7 @@ LOCAL_SRC_FILES:= \
 LOCAL_MODULE:= libmedia_helper
 LOCAL_MODULE_TAGS := optional
 
-LOCAL_CFLAGS += -Werror -Wno-error=deprecated-declarations -Wall
+LOCAL_CFLAGS +=  -Wno-error=deprecated-declarations -Wall
 LOCAL_CLANG := true
 
 include $(BUILD_STATIC_LIBRARY)
@@ -97,7 +97,7 @@ LOCAL_C_INCLUDES := \
     $(call include-path-for, audio-effects) \
     $(call include-path-for, audio-utils)
 
-LOCAL_CFLAGS += -Werror -Wno-error=deprecated-declarations -Wall
+LOCAL_CFLAGS +=  -Wno-error=deprecated-declarations -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libmediaplayerservice/nuplayer/Android.mk b/media/libmediaplayerservice/nuplayer/Android.mk
index 32b331d..d60da06 100644
--- a/media/libmediaplayerservice/nuplayer/Android.mk
+++ b/media/libmediaplayerservice/nuplayer/Android.mk
@@ -27,7 +27,7 @@ LOCAL_C_INCLUDES := \
 	$(TOP)/frameworks/av/include/media                            \
 	$(TOP)/frameworks/av/media/libavextensions
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 
 # enable experiments only in userdebug and eng builds
 ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
diff --git a/media/libmediaplayerservice/tests/Android.mk b/media/libmediaplayerservice/tests/Android.mk
index ea75a97..bd59a65 100644
--- a/media/libmediaplayerservice/tests/Android.mk
+++ b/media/libmediaplayerservice/tests/Android.mk
@@ -19,7 +19,7 @@ LOCAL_C_INCLUDES := \
 	frameworks/av/include \
 	frameworks/av/media/libmediaplayerservice \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 LOCAL_32_BIT_ONLY := true
diff --git a/media/libnbaio/Android.mk b/media/libnbaio/Android.mk
index 5ce5400..82e4c28 100644
--- a/media/libnbaio/Android.mk
+++ b/media/libnbaio/Android.mk
@@ -31,7 +31,7 @@ LOCAL_SHARED_LIBRARIES := \
 
 LOCAL_C_INCLUDES := $(call include-path-for, audio-utils)
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 ifeq ($(BOARD_HAVE_PRE_KITKAT_AUDIO_BLOB),true)
     LOCAL_CFLAGS += -DHAVE_PRE_KITKAT_AUDIO_BLOB
diff --git a/media/libstagefright/filters/Android.mk b/media/libstagefright/filters/Android.mk
index 179f054..913ae5e 100644
--- a/media/libstagefright/filters/Android.mk
+++ b/media/libstagefright/filters/Android.mk
@@ -20,7 +20,7 @@ LOCAL_C_INCLUDES := \
 intermediates := $(call intermediates-dir-for,STATIC_LIBRARIES,libRS,TARGET,)
 LOCAL_C_INCLUDES += $(intermediates)
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE:= libstagefright_mediafilter
diff --git a/media/libstagefright/foundation/Android.mk b/media/libstagefright/foundation/Android.mk
index 3c3ed59..565ddf9 100644
--- a/media/libstagefright/foundation/Android.mk
+++ b/media/libstagefright/foundation/Android.mk
@@ -33,7 +33,7 @@ LOCAL_SHARED_LIBRARIES := \
         liblog            \
         libpowermanager
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/http/Android.mk b/media/libstagefright/http/Android.mk
index bc71134..8e7c47d 100644
--- a/media/libstagefright/http/Android.mk
+++ b/media/libstagefright/http/Android.mk
@@ -21,7 +21,7 @@ LOCAL_MODULE:= libstagefright_http_support
 
 LOCAL_CFLAGS += -Wno-multichar
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := signed-integer-overflow
 
diff --git a/media/libstagefright/httplive/Android.mk b/media/libstagefright/httplive/Android.mk
index 107f9fa..540b0fe 100644
--- a/media/libstagefright/httplive/Android.mk
+++ b/media/libstagefright/httplive/Android.mk
@@ -15,7 +15,7 @@ LOCAL_C_INCLUDES:= \
         $(TOP)/frameworks/av/media/libstagefright/mpeg2ts \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/id3/Android.mk b/media/libstagefright/id3/Android.mk
index d092117..f04a2a9 100644
--- a/media/libstagefright/id3/Android.mk
+++ b/media/libstagefright/id3/Android.mk
@@ -4,7 +4,7 @@ include $(CLEAR_VARS)
 LOCAL_SRC_FILES := \
 	ID3.cpp
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/matroska/Android.mk b/media/libstagefright/matroska/Android.mk
index b0cbf08..b5d08cd 100644
--- a/media/libstagefright/matroska/Android.mk
+++ b/media/libstagefright/matroska/Android.mk
@@ -9,7 +9,7 @@ LOCAL_C_INCLUDES:= \
         $(TOP)/frameworks/native/include/media/openmax \
         $(TOP)/frameworks/av/media/libstagefright/include \
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/mpeg2ts/Android.mk b/media/libstagefright/mpeg2ts/Android.mk
index 9ef3d2a..2dd1425 100644
--- a/media/libstagefright/mpeg2ts/Android.mk
+++ b/media/libstagefright/mpeg2ts/Android.mk
@@ -14,7 +14,7 @@ LOCAL_C_INCLUDES:= \
 	$(TOP)/frameworks/native/include/media/openmax \
         $(TOP)/frameworks/av/media/libavextensions \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/omx/Android.mk b/media/libstagefright/omx/Android.mk
index a18f711..eeecf88 100644
--- a/media/libstagefright/omx/Android.mk
+++ b/media/libstagefright/omx/Android.mk
@@ -38,7 +38,7 @@ endif
 endif
 
 LOCAL_MODULE:= libstagefright_omx
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/omx/tests/Android.mk b/media/libstagefright/omx/tests/Android.mk
index 02e97f1..f12780d 100644
--- a/media/libstagefright/omx/tests/Android.mk
+++ b/media/libstagefright/omx/tests/Android.mk
@@ -11,7 +11,7 @@ LOCAL_C_INCLUDES := \
 	$(TOP)/frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 LOCAL_MODULE := omx_tests
@@ -38,7 +38,7 @@ LOCAL_SHARED_LIBRARIES := \
 LOCAL_C_INCLUDES := \
 	frameworks/av/media/libstagefright/omx \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 include $(BUILD_NATIVE_TEST)
diff --git a/media/libstagefright/rtsp/Android.mk b/media/libstagefright/rtsp/Android.mk
index ad343e2..7c5c22d 100644
--- a/media/libstagefright/rtsp/Android.mk
+++ b/media/libstagefright/rtsp/Android.mk
@@ -33,7 +33,7 @@ ifeq ($(TARGET_ARCH),arm)
     LOCAL_CFLAGS += -Wno-psabi
 endif
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
@@ -58,7 +58,7 @@ LOCAL_C_INCLUDES:= \
 	frameworks/av/media/libstagefright \
 	$(TOP)/frameworks/native/include/media/openmax
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := signed-integer-overflow
 
diff --git a/media/libstagefright/tests/Android.mk b/media/libstagefright/tests/Android.mk
index abbe4ae..0b16756 100644
--- a/media/libstagefright/tests/Android.mk
+++ b/media/libstagefright/tests/Android.mk
@@ -36,7 +36,7 @@ LOCAL_C_INCLUDES += \
 	$(TOP)/frameworks/native/include/media/hardware
 endif
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 LOCAL_32_BIT_ONLY := true
@@ -68,7 +68,7 @@ LOCAL_C_INCLUDES := \
 	frameworks/av/media/libstagefright/include \
 	$(TOP)/frameworks/native/include/media/openmax \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 include $(BUILD_NATIVE_TEST)
@@ -98,7 +98,7 @@ LOCAL_C_INCLUDES := \
 
 LOCAL_32_BIT_ONLY := true
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 include $(BUILD_NATIVE_TEST)
diff --git a/media/libstagefright/timedtext/Android.mk b/media/libstagefright/timedtext/Android.mk
index f2c6365..274b4d8 100644
--- a/media/libstagefright/timedtext/Android.mk
+++ b/media/libstagefright/timedtext/Android.mk
@@ -4,7 +4,7 @@ include $(CLEAR_VARS)
 LOCAL_SRC_FILES:=                 \
         TextDescriptions.cpp      \
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := signed-integer-overflow
 
diff --git a/media/libstagefright/webm/Android.mk b/media/libstagefright/webm/Android.mk
index 0d96f76..cf698cb 100644
--- a/media/libstagefright/webm/Android.mk
+++ b/media/libstagefright/webm/Android.mk
@@ -3,7 +3,7 @@ include $(CLEAR_VARS)
 
 LOCAL_CPPFLAGS += -D__STDINT_LIMITS
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := unsigned-integer-overflow signed-integer-overflow
 
diff --git a/media/libstagefright/wifi-display/Android.mk b/media/libstagefright/wifi-display/Android.mk
index 922de08..ecb5ca1 100644
--- a/media/libstagefright/wifi-display/Android.mk
+++ b/media/libstagefright/wifi-display/Android.mk
@@ -35,7 +35,7 @@ LOCAL_SHARED_LIBRARIES:= \
         libui                           \
         libutils                        \
 
-LOCAL_CFLAGS += -Wno-multichar -Werror -Wall
+LOCAL_CFLAGS += -Wno-multichar  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := signed-integer-overflow
 
diff --git a/media/libstagefright/yuv/Android.mk b/media/libstagefright/yuv/Android.mk
index f2fd3be..b10e51e 100644
--- a/media/libstagefright/yuv/Android.mk
+++ b/media/libstagefright/yuv/Android.mk
@@ -12,7 +12,7 @@ LOCAL_SHARED_LIBRARIES :=       \
 LOCAL_MODULE:= libstagefright_yuv
 
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 LOCAL_SANITIZE := signed-integer-overflow
 
diff --git a/media/mediaserver/Android.mk b/media/mediaserver/Android.mk
index 8ed36f3..87b9ee8 100644
--- a/media/mediaserver/Android.mk
+++ b/media/mediaserver/Android.mk
@@ -5,7 +5,7 @@ include $(CLEAR_VARS)
 LOCAL_SRC_FILES := register.cpp
 LOCAL_MODULE := libregistermsext
 LOCAL_MODULE_TAGS := optional
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 include $(BUILD_STATIC_LIBRARY)
 endif
 
@@ -40,7 +40,7 @@ LOCAL_32_BIT_ONLY := true
 
 LOCAL_INIT_RC := mediaserver.rc
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 ifneq ($(BOARD_NUMBER_OF_CAMERAS),)
     LOCAL_CFLAGS += -DMAX_CAMERAS=$(BOARD_NUMBER_OF_CAMERAS)
diff --git a/media/mtp/Android.mk b/media/mtp/Android.mk
index cb7e4aa..ea0a0b1 100644
--- a/media/mtp/Android.mk
+++ b/media/mtp/Android.mk
@@ -37,7 +37,7 @@ LOCAL_SRC_FILES:=                                       \
 
 LOCAL_MODULE:= libmtp
 
-LOCAL_CFLAGS := -DMTP_DEVICE -DMTP_HOST -Wall -Wextra -Werror
+LOCAL_CFLAGS := -DMTP_DEVICE -DMTP_HOST -Wall -Wextra
 
 LOCAL_SHARED_LIBRARIES := libutils libcutils liblog libusbhost libbinder
 
diff --git a/media/ndk/Android.mk b/media/ndk/Android.mk
index 74729e4..2d12bfa 100644
--- a/media/ndk/Android.mk
+++ b/media/ndk/Android.mk
@@ -40,7 +40,7 @@ LOCAL_C_INCLUDES := \
 
 LOCAL_CFLAGS += -fvisibility=hidden -D EXPORT='__attribute__ ((visibility ("default")))'
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 
 LOCAL_SHARED_LIBRARIES := \
     libbinder \
diff --git a/media/utils/Android.mk b/media/utils/Android.mk
index 54d22b1..722b588 100644
--- a/media/utils/Android.mk
+++ b/media/utils/Android.mk
@@ -32,7 +32,7 @@ LOCAL_C_INCLUDES := $(LOCAL_PATH)/include
 LOCAL_CFLAGS += \
   -Wall \
   -Wextra \
-  -Werror \
+   \
 
 LOCAL_EXPORT_C_INCLUDE_DIRS := $(LOCAL_PATH)/include
 
diff --git a/radio/Android.mk b/radio/Android.mk
index 0377328..4441903 100644
--- a/radio/Android.mk
+++ b/radio/Android.mk
@@ -36,6 +36,6 @@ LOCAL_SHARED_LIBRARIES := \
 
 LOCAL_MODULE:= libradio
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/services/audioflinger/Android.mk b/services/audioflinger/Android.mk
index 39deedf..2e2dc1c 100644
--- a/services/audioflinger/Android.mk
+++ b/services/audioflinger/Android.mk
@@ -77,6 +77,7 @@ endif
 LOCAL_CFLAGS += -Os
 
 LOCAL_MODULE:= libaudioflinger
+LOCAL_CLANG := true
 
 LOCAL_SRC_FILES += \
     AudioWatchdog.cpp        \
@@ -94,7 +95,7 @@ LOCAL_CFLAGS += -DSTATE_QUEUE_INSTANTIATIONS='"StateQueueInstantiations.cpp"'
 
 LOCAL_CFLAGS += -fvisibility=hidden
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 
 include $(BUILD_SHARED_LIBRARY)
 
@@ -124,7 +125,7 @@ LOCAL_MODULE:= test-resample
 
 LOCAL_MODULE_TAGS := optional
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_EXECUTABLE)
 
@@ -165,7 +166,7 @@ endif
 
 LOCAL_MODULE := libaudioresampler
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 
 # uncomment to disable NEON on architectures that actually do support NEON, for benchmarking
 #LOCAL_CFLAGS += -DUSE_NEON=false
diff --git a/services/audioflinger/audio-resampler/Android.mk b/services/audioflinger/audio-resampler/Android.mk
index bb2807c..a50fc54 100644
--- a/services/audioflinger/audio-resampler/Android.mk
+++ b/services/audioflinger/audio-resampler/Android.mk
@@ -11,6 +11,6 @@ LOCAL_MODULE_TAGS := optional
 
 LOCAL_SHARED_LIBRARIES  := libutils liblog
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/services/audioflinger/tests/Android.mk b/services/audioflinger/tests/Android.mk
index 3505e0f..94cb3d3 100644
--- a/services/audioflinger/tests/Android.mk
+++ b/services/audioflinger/tests/Android.mk
@@ -23,7 +23,7 @@ LOCAL_SRC_FILES := \
 LOCAL_MODULE := resampler_tests
 LOCAL_MODULE_TAGS := tests
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_NATIVE_TEST)
 
@@ -63,6 +63,6 @@ LOCAL_MODULE_TAGS := optional
 
 LOCAL_CXX_STL := libc++
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_EXECUTABLE)
diff --git a/services/audiopolicy/Android.mk b/services/audiopolicy/Android.mk
index ee8ca24..974c16e 100644
--- a/services/audiopolicy/Android.mk
+++ b/services/audiopolicy/Android.mk
@@ -51,6 +51,7 @@ LOCAL_STATIC_LIBRARIES := \
 
 LOCAL_MULTILIB := $(AUDIOSERVER_MULTILIB)
 
+LOCAL_CLANG := true
 LOCAL_MODULE:= libaudiopolicyservice
 
 LOCAL_CFLAGS += -fvisibility=hidden
@@ -112,7 +113,7 @@ LOCAL_CFLAGS += -Wall
 LOCAL_MULTILIB := $(AUDIOSERVER_MULTILIB)
 
 LOCAL_MODULE:= libaudiopolicymanagerdefault
-
+LOCAL_CLANG := true
 include $(BUILD_SHARED_LIBRARY)
 
 ifneq ($(USE_CUSTOM_AUDIO_POLICY), 1)
@@ -137,7 +138,7 @@ LOCAL_CFLAGS := -Wall
 LOCAL_MULTILIB := $(AUDIOSERVER_MULTILIB)
 
 LOCAL_MODULE:= libaudiopolicymanager
-
+LOCAL_CLANG := true
 include $(BUILD_SHARED_LIBRARY)
 
 endif
diff --git a/services/audiopolicy/common/managerdefinitions/Android.mk b/services/audiopolicy/common/managerdefinitions/Android.mk
index e2d372d..dd7468d 100644
--- a/services/audiopolicy/common/managerdefinitions/Android.mk
+++ b/services/audiopolicy/common/managerdefinitions/Android.mk
@@ -89,5 +89,6 @@ LOCAL_MULTILIB := $(AUDIOSERVER_MULTILIB)
 LOCAL_CFLAGS += -Wall -Werror
 
 LOCAL_MODULE := libaudiopolicycomponents
+LOCAL_CLANG := true
 
 include $(BUILD_STATIC_LIBRARY)
diff --git a/services/audiopolicy/engineconfigurable/Android.mk b/services/audiopolicy/engineconfigurable/Android.mk
index 6dba75b..9eb1509 100755
--- a/services/audiopolicy/engineconfigurable/Android.mk
+++ b/services/audiopolicy/engineconfigurable/Android.mk
@@ -22,7 +22,7 @@ audio_policy_engine_includes_common := \
 
 LOCAL_CFLAGS += \
     -Wall \
-    -Werror \
+     \
     -Wextra \
 
 LOCAL_EXPORT_C_INCLUDE_DIRS := \
diff --git a/services/audiopolicy/engineconfigurable/parameter-framework/plugin/Android.mk b/services/audiopolicy/engineconfigurable/parameter-framework/plugin/Android.mk
index 0e44f2c..9c45695 100755
--- a/services/audiopolicy/engineconfigurable/parameter-framework/plugin/Android.mk
+++ b/services/audiopolicy/engineconfigurable/parameter-framework/plugin/Android.mk
@@ -15,7 +15,7 @@ LOCAL_SRC_FILES := \
 
 LOCAL_CFLAGS += \
     -Wall \
-    -Werror \
+     \
     -Wextra \
     -fvisibility-inlines-hidden \
     -fvisibility=hidden
diff --git a/services/audiopolicy/engineconfigurable/wrapper/Android.mk b/services/audiopolicy/engineconfigurable/wrapper/Android.mk
index f4283a8..2060eff 100644
--- a/services/audiopolicy/engineconfigurable/wrapper/Android.mk
+++ b/services/audiopolicy/engineconfigurable/wrapper/Android.mk
@@ -24,7 +24,7 @@ LOCAL_MODULE:= libaudiopolicypfwwrapper
 LOCAL_EXPORT_C_INCLUDE_DIRS := $(LOCAL_PATH)/include
 
 LOCAL_MODULE_TAGS := optional
-LOCAL_CFLAGS := -Wall -Werror -Wextra
+LOCAL_CFLAGS := -Wall  -Wextra
 
 include $(BUILD_STATIC_LIBRARY)
 
diff --git a/services/audiopolicy/enginedefault/Android.mk b/services/audiopolicy/enginedefault/Android.mk
index 543b82b..86661d4 100755
--- a/services/audiopolicy/enginedefault/Android.mk
+++ b/services/audiopolicy/enginedefault/Android.mk
@@ -15,7 +15,7 @@ audio_policy_engine_includes_common := \
 
 LOCAL_CFLAGS += \
     -Wall \
-    -Werror \
+     \
     -Wextra \
 
 LOCAL_EXPORT_C_INCLUDE_DIRS := \
diff --git a/services/mediadrm/tests/Android.mk b/services/mediadrm/tests/Android.mk
index 8cbf782..7e9c2c0 100644
--- a/services/mediadrm/tests/Android.mk
+++ b/services/mediadrm/tests/Android.mk
@@ -18,7 +18,7 @@ LOCAL_C_INCLUDES := \
 	frameworks/av/include \
 	frameworks/av/media/libmediaplayerservice \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 LOCAL_32_BIT_ONLY := true
diff --git a/services/medialog/Android.mk b/services/medialog/Android.mk
index 88f98cf..b031661 100644
--- a/services/medialog/Android.mk
+++ b/services/medialog/Android.mk
@@ -12,6 +12,6 @@ LOCAL_MODULE:= libmedialogservice
 
 LOCAL_C_INCLUDES := $(call include-path-for, audio-utils)
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/services/mediaresourcemanager/Android.mk b/services/mediaresourcemanager/Android.mk
index b72230f..8a47557 100644
--- a/services/mediaresourcemanager/Android.mk
+++ b/services/mediaresourcemanager/Android.mk
@@ -13,7 +13,7 @@ LOCAL_32_BIT_ONLY := true
 LOCAL_C_INCLUDES += \
     $(TOPDIR)frameworks/av/include
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/services/mediaresourcemanager/test/Android.mk b/services/mediaresourcemanager/test/Android.mk
index 3b4ef0d..b6589f9 100644
--- a/services/mediaresourcemanager/test/Android.mk
+++ b/services/mediaresourcemanager/test/Android.mk
@@ -20,7 +20,7 @@ LOCAL_C_INCLUDES := \
   frameworks/av/include \
   frameworks/av/services/mediaresourcemanager \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 LOCAL_32_BIT_ONLY := true
@@ -46,7 +46,7 @@ LOCAL_C_INCLUDES := \
   frameworks/av/include \
   frameworks/av/services/mediaresourcemanager \
 
-LOCAL_CFLAGS += -Werror -Wall
+LOCAL_CFLAGS +=  -Wall
 LOCAL_CLANG := true
 
 LOCAL_32_BIT_ONLY := true
diff --git a/soundtrigger/Android.mk b/soundtrigger/Android.mk
index c794cc1..630fefa 100644
--- a/soundtrigger/Android.mk
+++ b/soundtrigger/Android.mk
@@ -35,6 +35,6 @@ LOCAL_SHARED_LIBRARIES := \
 
 LOCAL_MODULE:= libsoundtrigger
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/tools/resampler_tools/Android.mk b/tools/resampler_tools/Android.mk
index bba5199..3330363 100644
--- a/tools/resampler_tools/Android.mk
+++ b/tools/resampler_tools/Android.mk
@@ -12,6 +12,6 @@ LOCAL_SRC_FILES := \
 
 LOCAL_MODULE := fir
 
-LOCAL_CFLAGS := -Werror -Wall
+LOCAL_CFLAGS :=  -Wall
 
 include $(BUILD_HOST_EXECUTABLE)
-- 
2.9.3

