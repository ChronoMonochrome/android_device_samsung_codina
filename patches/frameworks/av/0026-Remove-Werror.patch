From 6c5f6e7ac5cfdd8d5167e1f15fa7f81060e49d3a Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH 26/57] Remove -Werror

---
 media/libmediaplayerservice/Android.mk      | 2 +-
 media/libstagefright/Android.bp             | 1 -
 media/mediaserver/Android.mk                | 1 +
 services/camera/libcameraservice/Android.mk | 1 +
 4 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/media/libmediaplayerservice/Android.mk b/media/libmediaplayerservice/Android.mk
index 1fc74a9c2..688cd0916 100644
--- a/media/libmediaplayerservice/Android.mk
+++ b/media/libmediaplayerservice/Android.mk
@@ -59,7 +59,7 @@ LOCAL_C_INCLUDES :=                                                 \
     frameworks/native/include/media/hardware                 \
     external/tremolo/Tremolo                                 \
 
-LOCAL_CFLAGS += -Werror -Wno-error=deprecated-declarations -Wall
+LOCAL_CFLAGS += -Wno-error=deprecated-declarations -Wall
 
 LOCAL_MODULE:= libmediaplayerservice
 
diff --git a/media/libstagefright/Android.bp b/media/libstagefright/Android.bp
index 96dbcf76a..e3c1df915 100644
--- a/media/libstagefright/Android.bp
+++ b/media/libstagefright/Android.bp
@@ -136,7 +136,6 @@ cc_library_shared {
 
     cflags: [
         "-Wno-multichar",
-        "-Werror",
         "-Wno-error=deprecated-declarations",
         "-Wall",
     ],
diff --git a/media/mediaserver/Android.mk b/media/mediaserver/Android.mk
index 72fd88749..fe065cdd7 100644
--- a/media/mediaserver/Android.mk
+++ b/media/mediaserver/Android.mk
@@ -18,6 +18,7 @@ LOCAL_SHARED_LIBRARIES := \
         libresourcemanagerservice \
         liblog \
         libmediaplayerservice \
+        libnativewindow \
         libutils \
         libbinder \
         libicuuc \
diff --git a/services/camera/libcameraservice/Android.mk b/services/camera/libcameraservice/Android.mk
index 762959430..fafe658b4 100644
--- a/services/camera/libcameraservice/Android.mk
+++ b/services/camera/libcameraservice/Android.mk
@@ -74,6 +74,7 @@ LOCAL_SHARED_LIBRARIES:= \
     libhidltransport \
     libjpeg \
     libmemunreachable \
+    libnativewindow \
     android.hardware.camera.common@1.0 \
     android.hardware.camera.provider@2.4 \
     android.hardware.camera.device@1.0 \
-- 
2.11.0

