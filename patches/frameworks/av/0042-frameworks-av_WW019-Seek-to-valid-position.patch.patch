From f13e7e93ea717e841fbc0ba72c0a813c5a15e0f7 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 26 Dec 2016 19:45:53 +0700
Subject: [PATCH 42/46] frameworks-av_WW019-Seek-to-valid-position.patch

Change-Id: I0ae020d2c808db84db4a074b59a6fa3aa2c6dbbf
---
 media/libmediaplayerservice/nuplayer/NuPlayer.cpp | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/media/libmediaplayerservice/nuplayer/NuPlayer.cpp b/media/libmediaplayerservice/nuplayer/NuPlayer.cpp
index 7183ad4..9379eeb 100644
--- a/media/libmediaplayerservice/nuplayer/NuPlayer.cpp
+++ b/media/libmediaplayerservice/nuplayer/NuPlayer.cpp
@@ -682,10 +682,9 @@ void NuPlayer::onMessageReceived(const sp<AMessage> &msg) {
                     // If the video decoder is not set (perhaps audio only in this case)
                     // do not perform a seek as it is not needed.
                     int64_t currentPositionUs = 0;
-                    if (getCurrentPosition(&currentPositionUs) == OK) {
-                        mDeferredActions.push_back(
-                                new SeekAction(currentPositionUs));
-                    }
+                    getCurrentPosition(&currentPositionUs);
+                    mDeferredActions.push_back(
+                            new SeekAction(currentPositionUs));
                 }
 
                 // If there is a new surface texture, instantiate decoders
-- 
2.9.3

