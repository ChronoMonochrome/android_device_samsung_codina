From 3eecb32633e78c6f0d411aa304a3c18049140cf9 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Sun, 14 Feb 2016 06:58:44 +0700
Subject: [PATCH 25/95] Force GCC 4.8 for some modules

Change-Id: Ie77c6c116f29f9b950fef56a20bba333d4f9c18f
---
 media/libmediaplayerservice/Android.mk | 4 ++++
 media/libstagefright/Android.mk        | 3 +++
 media/mediaserver/Android.mk           | 4 +++-
 media/ndk/Android.mk                   | 3 +++
 4 files changed, 13 insertions(+), 1 deletion(-)

diff --git a/media/libmediaplayerservice/Android.mk b/media/libmediaplayerservice/Android.mk
index 2cf5710..1d1eb4d 100644
--- a/media/libmediaplayerservice/Android.mk
+++ b/media/libmediaplayerservice/Android.mk
@@ -55,8 +55,12 @@ LOCAL_C_INCLUDES :=                                                 \
     $(TOP)/frameworks/native/include/media/openmax                  \
     $(TOP)/external/tremolo/Tremolo                                 \
 
+
 LOCAL_MODULE:= libmediaplayerservice
 
+LOCAL_CC  := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-gcc
+LOCAL_CXX := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-g++
+
 LOCAL_32_BIT_ONLY := true
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/media/libstagefright/Android.mk b/media/libstagefright/Android.mk
index a3efc9d..31acb32 100644
--- a/media/libstagefright/Android.mk
+++ b/media/libstagefright/Android.mk
@@ -130,6 +130,9 @@ endif
 
 LOCAL_MODULE:= libstagefright
 
+LOCAL_CC  := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-gcc
+LOCAL_CXX := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-g++
+
 LOCAL_MODULE_TAGS := optional
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/media/mediaserver/Android.mk b/media/mediaserver/Android.mk
index ef2f395..40a6330 100644
--- a/media/mediaserver/Android.mk
+++ b/media/mediaserver/Android.mk
@@ -42,6 +42,8 @@ LOCAL_C_INCLUDES := \
 
 LOCAL_MODULE:= mediaserver
 LOCAL_32_BIT_ONLY := true
-LOCAL_CFLAGS += -std=gnu++11
+
+LOCAL_CC  := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-gcc
+LOCAL_CXX := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-g++
 
 include $(BUILD_EXECUTABLE)
diff --git a/media/ndk/Android.mk b/media/ndk/Android.mk
index 8f795cd..a5f9946 100644
--- a/media/ndk/Android.mk
+++ b/media/ndk/Android.mk
@@ -30,6 +30,9 @@ LOCAL_SRC_FILES:=                                       \
 
 LOCAL_MODULE:= libmediandk
 
+LOCAL_CC  := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-gcc
+LOCAL_CXX := $(TOP)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.8/bin/arm-linux-androideabi-g++
+
 LOCAL_C_INCLUDES := \
     bionic/libc/private \
     frameworks/base/core/jni \
-- 
2.5.0

