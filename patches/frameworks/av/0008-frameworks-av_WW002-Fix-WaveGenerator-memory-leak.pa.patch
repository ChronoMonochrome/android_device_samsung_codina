From 390c9452f70f79c00b5cd6020f72ab350befe51f Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Sat, 12 Mar 2016 02:52:15 +0700
Subject: [PATCH 08/15] frameworks-av_WW002-Fix-WaveGenerator-memory-leak.patch

Change-Id: I83a549abc2d2ac9f024689844fc8615a96dd4bac
---
 media/libmedia/ToneGenerator.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/media/libmedia/ToneGenerator.cpp b/media/libmedia/ToneGenerator.cpp
index 411519d..16d1b80 100644
--- a/media/libmedia/ToneGenerator.cpp
+++ b/media/libmedia/ToneGenerator.cpp
@@ -876,6 +876,7 @@ ToneGenerator::~ToneGenerator() {
         ALOGV("Delete Track: %p", mpAudioTrack.get());
         mpAudioTrack.clear();
     }
+    clearWaveGens();
 }
 
 ////////////////////////////////////////////////////////////////////////////////
-- 
2.5.0

