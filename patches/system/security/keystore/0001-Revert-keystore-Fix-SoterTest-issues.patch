From 8971c5952288fb5f60f1c75321c5b7d97de765a6 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Fri, 9 Sep 2016 02:00:58 +0700
Subject: [PATCH 1/2] Revert "keystore: Fix SoterTest issues"

This reverts commit 6b8a2a31177c7baeabe9a05afb72cdd411698598.

Change-Id: I1d5cc779266ad6f173f7564c8a573b2aa63850ec
---
 keystore/keystore.cpp | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/keystore/keystore.cpp b/keystore/keystore.cpp
index 07212e9..e9fa408 100644
--- a/keystore/keystore.cpp
+++ b/keystore/keystore.cpp
@@ -2441,8 +2441,7 @@ public:
                 {
                     uid_t callingUid = IPCThreadState::self()->getCallingUid();
                     Blob keyBlob;
-                    String8 name8(reinterpret_cast<const char*>(param.blob.data),
-                                                        param.blob.data_length);
+                    String8 name8(reinterpret_cast<const char*>(param.blob.data));
                     ResponseCode responseCode = mKeyStore->getKeyForName(&keyBlob,
                             name8, callingUid, TYPE_KEYMASTER_10);
                     if (responseCode != ::NO_ERROR) {
-- 
2.5.0

