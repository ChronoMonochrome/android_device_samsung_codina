 logd: enable -Os and GNU C89 back

Aggressive -O2, -O3 optimizations on GCC 5.1 and GNU C11 standards
causes a seg-fault on logd.

 libcutils: fix compilation errors

By removing -Werror and enforcing GNU C89 standards

diff --git a/logd/Android.mk b/logd/Android.mk
index b4a2710..a0397a0 100644
--- a/logd/Android.mk
+++ b/logd/Android.mk
@@ -27,6 +27,9 @@ LOCAL_SHARED_LIBRARIES := \
 event_flag := -DAUDITD_LOG_TAG=1003 -DLOGD_LOG_TAG=1004
 
 LOCAL_CFLAGS := -Werror $(event_flag)
+LOCAL_CFLAGS += -Os
+
+LOCAL_CONLYFLAGS += -std=gnu89
 
 include $(BUILD_EXECUTABLE)
 
diff --git a/libcutils/Android.mk b/libcutils/Android.mk
index b4a2720..a0397a0 100644
--- a/libcutils/Android.mk
+++ b/libcutils/Android.mk
@@ -79,7 +79,7 @@ LOCAL_SRC_FILES := $(commonSources) $(commonHostSources) dlmalloc_stubs.c
 LOCAL_SRC_FILES := $(commonSources) $(commonHostSources) dlmalloc_stubs.c
 LOCAL_STATIC_LIBRARIES := liblog
 ifneq ($(HOST_OS),windows)
-LOCAL_CFLAGS += -Werror
+LOCAL_CFLAGS += -std=gnu89
 endif
 LOCAL_MULTILIB := both
 include $(BUILD_HOST_STATIC_LIBRARY)
@@ -92,7 +92,7 @@ endif
 LOCAL_SRC_FILES := $(commonSources) $(commonHostSources) dlmalloc_stubs.c
 LOCAL_SHARED_LIBRARIES := liblog
 ifneq ($(HOST_OS),windows)
-LOCAL_CFLAGS += -Werror
+LOCAL_CFLAGS += -std=gnu89
 endif
 LOCAL_MULTILIB := both
 include $(BUILD_HOST_SHARED_LIBRARY)
@@ -115,7 +115,7 @@ include $(CLEAR_VARS)
 ifneq ($(ENABLE_CPUSETS),)
 LOCAL_CFLAGS += -DUSE_CPUSETS
 endif
-LOCAL_CFLAGS += -Werror -std=gnu90
+LOCAL_CFLAGS += -std=gnu90
 include $(BUILD_STATIC_LIBRARY)
 
 include $(CLEAR_VARS)
@@ -161,7 +161,7 @@ LOCAL_MODULE := libcutils
 ifneq ($(ENABLE_CPUSETS),)
 LOCAL_CFLAGS += -DUSE_CPUSETS
 endif
-LOCAL_CFLAGS += -Werror
+LOCAL_CFLAGS += -std=gnu89
 LOCAL_C_INCLUDES := $(libcutils_c_includes)
 include $(BUILD_SHARED_LIBRARY)
 
