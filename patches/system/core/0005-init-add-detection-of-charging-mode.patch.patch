From 1e36de88cb847da9db1f63654609615c27ab66bb Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Thu, 21 May 2015 14:46:28 +0300
Subject: [PATCH 5/6] 0005-init-add-detection-of-charging-mode.patch

Change-Id: Ic3a0896a3e4df09e92326aba6b555f73c8868f0e
---
 init/Android.mk | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/init/Android.mk b/init/Android.mk
index db000c2..cebca4a 100755
--- a/init/Android.mk
+++ b/init/Android.mk
@@ -46,6 +46,14 @@ ifneq ($(TARGET_NR_SVC_SUPP_GIDS),)
 LOCAL_CFLAGS += -DNR_SVC_SUPP_GIDS=$(TARGET_NR_SVC_SUPP_GIDS)
 endif
 
+SYSTEM_CORE_INIT_DEFINES := BOARD_CHARGING_MODE_BOOTING_LPM
+
+$(foreach system_core_init_define,$(SYSTEM_CORE_INIT_DEFINES), \
+  $(if $($(system_core_init_define)), \
+    $(eval LOCAL_CFLAGS += -D$(system_core_init_define)=\"$($(system_core_init_define))\") \
+  ) \
+)
+
 LOCAL_MODULE:= init
 
 LOCAL_FORCE_STATIC_EXECUTABLE := true
-- 
1.9.1

