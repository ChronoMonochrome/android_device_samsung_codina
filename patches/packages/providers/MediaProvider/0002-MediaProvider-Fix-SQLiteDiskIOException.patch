From e660e5dfb7c942bbb33ef59aef146c00f3e976a6 Mon Sep 17 00:00:00 2001
From: huiyan <huiyan@codeaurora.org>
Date: Mon, 18 Jan 2016 15:03:44 +0800
Subject: [PATCH 2/5] MediaProvider: Fix SQLiteDiskIOException.

The SQLiteDiskIOExcept occur from monkey test.
---
 src/com/android/providers/media/MediaProvider.java | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/com/android/providers/media/MediaProvider.java b/src/com/android/providers/media/MediaProvider.java
index 3977af8..dcd7699 100644
--- a/src/com/android/providers/media/MediaProvider.java
+++ b/src/com/android/providers/media/MediaProvider.java
@@ -1307,7 +1307,13 @@ public class MediaProvider extends ContentProvider {
             return null;
         }
         helper.mNumQueries++;
-        SQLiteDatabase db = helper.getReadableDatabase();
+        SQLiteDatabase db = null;
+        try {
+            db = helper.getReadableDatabase();
+        } catch (Exception e) {
+            e.printStackTrace();
+            return null;
+        }
         if (db == null) return null;
         SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
         String limit = uri.getQueryParameter("limit");
-- 
2.11.0

