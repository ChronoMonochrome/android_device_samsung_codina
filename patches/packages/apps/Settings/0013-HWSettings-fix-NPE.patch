From af18e2c33f37df8850da2ab51e7a3e4c04868a99 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Fri, 13 Jan 2017 13:33:48 +0700
Subject: [PATCH 13/14] HWSettings: fix NPE

Change-Id: Ie73a5e331407254b63dc93545612053b979962a0
---
 src/com/android/settings/rr/input/HWSettings.java | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/com/android/settings/rr/input/HWSettings.java b/src/com/android/settings/rr/input/HWSettings.java
index 691c5a4..7e16fa6 100644
--- a/src/com/android/settings/rr/input/HWSettings.java
+++ b/src/com/android/settings/rr/input/HWSettings.java
@@ -246,8 +246,9 @@ public class HWSettings extends ActionFragment implements
 
 
         if (hasAssistKey) {
-            if (!showAssistWake) {
-                assistCategory.removePreference(findPreference(CMSettings.System.ASSIST_WAKE_SCREEN));
+		Preference AssistWakeScreen = findPreference(CMSettings.System.ASSIST_WAKE_SCREEN);
+            if (!showAssistWake && AssistWakeScreen != null) {
+                assistCategory.removePreference(AssistWakeScreen);
             }
         } else {
             prefScreen.removePreference(assistCategory);
-- 
2.9.3

