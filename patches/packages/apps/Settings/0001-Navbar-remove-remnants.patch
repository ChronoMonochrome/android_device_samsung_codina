From fb7dae5d272ebcae158ad708a66b119b92515e91 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 25 Jan 2016 12:11:00 +0700
Subject: [PATCH] Navbar: remove remnants

Change-Id: Ie318cb62ecdfa2125531be832980433bc3a73d01
---
 AndroidManifest.xml                                |  17 --
 res/layout/fragment_navbar_settings.xml            | 197 ---------------------
 res/values/arrays.xml                              |   2 -
 res/values/config.xml                              |   5 -
 res/values/dimens.xml                              |   1 -
 res/values/vanir_strings.xml                       |   7 -
 res/xml/system_ui_settings.xml                     |  12 --
 .../settings/util/HardwareKeyNavbarHelper.java     |  16 +-
 8 files changed, 2 insertions(+), 255 deletions(-)
 delete mode 100644 res/layout/fragment_navbar_settings.xml

diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index e6b3e2d..74418ae 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -1927,23 +1927,6 @@
 
         <activity android:name=".quicksettings.QuickSettingsTilesStyle" />
 
-        <activity android:name=".vanir.NavRingTargets" />
-
-        <activity android:name=".vanir.navbar.NavbarTabHostFragment" />
-        <activity android:name="Settings$NavbarSettingsActivity"
-                android:label="@string/category_navbar"
-                android:taskAffinity=""
-                android:excludeFromRecents="true">
-            <intent-filter>
-                <action android:name="android.intent.action.MAIN" />
-                <category android:name="android.intent.category.DEFAULT" />
-            </intent-filter>
-            <meta-data android:name="com.android.settings.FRAGMENT_CLASS"
-                android:value="com.android.settings.vanir.navbar.NavbarTabHostFragment" />
-            <meta-data android:name="com.android.settings.TOP_LEVEL_HEADER_ID"
-                android:resource="@id/vanir_voodoo" />
-        </activity>
-
         <activity android:name=".profiles.NFCProfile"
                 android:theme="@android:style/Theme.NoDisplay">
             <intent-filter>
diff --git a/res/layout/fragment_navbar_settings.xml b/res/layout/fragment_navbar_settings.xml
deleted file mode 100644
index aa29a4f..0000000
--- a/res/layout/fragment_navbar_settings.xml
+++ /dev/null
@@ -1,197 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
-
-            android:layout_width="match_parent"
-            android:layout_height="match_parent">
-
-    <LinearLayout style="@style/settingsFragmentStyle"
-              android:layout_width="match_parent"
-              android:layout_height="match_parent"
-              android:gravity="center_horizontal"
-              android:orientation="vertical">
-
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="0dp"
-            android:layout_weight=".75"
-            android:gravity="center_horizontal"
-            android:orientation="vertical">
-
-            <TextView
-                    android:id="@+id/navigation_bar_height_text"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:paddingTop="4dp"
-                    android:text="@string/navigation_bar_height_text"
-                    android:textSize="16sp"/>
-            <LinearLayout
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content" >
-
-                <TextView
-                        android:id="@+id/navigation_bar_height_value"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:layout_gravity="left"
-                        android:textSize="16sp"/>
-                <SeekBar
-                        android:id="@+id/navigation_bar_height"
-                        style="?android:attr/progressBarStyleHorizontal"
-                        android:layout_width="match_parent"
-                        android:layout_height="wrap_content"
-                        android:layout_marginLeft="17dp"
-                        android:layout_marginRight="17dp" />
-           </LinearLayout>
-
-            <TextView
-                    android:id="@+id/navigation_bar_height_landscape_text"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:paddingTop="6dp"
-                    android:text="@string/navigation_bar_height_landscape_text"
-                    android:textSize="16sp"/>
-        
-            <LinearLayout
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content" >
-
-                <TextView
-                        android:id="@+id/navigation_bar_height_landscape_value"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:layout_gravity="left"
-                        android:textSize="16sp"/>
-                <SeekBar
-                        android:id="@+id/navigation_bar_height_landscape"
-                        style="?android:attr/progressBarStyleHorizontal"
-                        android:layout_width="match_parent"
-                        android:layout_height="wrap_content"
-                        android:layout_marginLeft="17dp"
-                        android:layout_marginRight="17dp" />
-            </LinearLayout>
-
-            <TextView
-                    android:id="@+id/navigation_bar_width_text"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:paddingTop="8dp"
-                    android:text="@string/navigation_bar_width_text"
-                    android:textSize="16sp"/>
-            <LinearLayout
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content" >
-
-                <TextView
-                        android:id="@+id/navigation_bar_width_value"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:layout_gravity="left"
-                        android:textSize="16sp"/>
-                <SeekBar
-                        android:id="@+id/navigation_bar_width"
-                        style="?android:attr/progressBarStyleHorizontal"
-                        android:layout_width="match_parent"
-                        android:layout_height="wrap_content"
-                        android:layout_marginLeft="17dp"
-                        android:layout_marginRight="17dp" />
-            </LinearLayout>
-
-            <View
-                android:layout_width="fill_parent"
-                android:layout_height="1dp"
-                android:layout_marginTop="8dp"
-                android:background="@android:color/darker_gray"/>
-
-            <LinearLayout
-                style="@style/settingsFragmentStyle"
-                android:layout_width="fill_parent"
-                android:layout_height="wrap_content"
-                android:orientation="vertical" >
-
-                <CheckBox
-                    android:id="@+id/sidekey_checkbox"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:text="@string/enable_sidekeys"
-                    android:defaultValue="true" />
-                <TextView
-                    android:id="@+id/sidekey_text"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:textSize="12sp"
-                    android:text="@string/enable_sidekeys_summary" />
-            </LinearLayout>
-
-            <View
-                android:layout_width="fill_parent"
-                android:layout_height="1dp"
-                android:paddingBottom="2dp"
-                android:background="@android:color/darker_gray"/>
-
-            <LinearLayout
-                style="@style/settingsFragmentStyle"
-                android:layout_width="fill_parent"
-                android:layout_height="wrap_content"
-                android:orientation="vertical" >
-
-                <CheckBox
-                    android:id="@+id/arrows_checkbox"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:text="@string/enable_ime_layout"
-                    android:defaultValue="true" />
-                <TextView
-                    android:id="@+id/arrows_text"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:textSize="12sp"
-                    android:text="@string/enable_ime_layout_summary" />
-            </LinearLayout>
-
-            <View
-                android:layout_width="fill_parent"
-                android:layout_height="1dp"
-                android:paddingBottom="1dp"
-                android:background="@android:color/darker_gray"/>
-
-            <LinearLayout
-                android:id="@+id/alternate_layouts"
-                style="@style/settingsFragmentStyle"
-                android:layout_width="fill_parent"
-                android:layout_height="wrap_content"
-                android:orientation="vertical"
-                android:clickable="true" >
-
-                <TextView
-                    android:id="@+id/alternate_layout_title"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:textSize="16sp"
-                    android:textColor="#ffffff"
-                    android:text="@string/alternate_key_layouts" />
-                <TextView
-                    android:id="@+id/alternate_layout_text"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="left"
-                    android:textSize="12sp"
-                    android:text="@string/alternate_key_layouts_summary" />
-            </LinearLayout>
-
-            <View
-                android:layout_width="fill_parent"
-                android:layout_height="1dp"
-                android:paddingBottom="1dp"
-                android:background="@android:color/darker_gray"/>
-        </LinearLayout>
-    </LinearLayout>
-</ScrollView>
diff --git a/res/values/arrays.xml b/res/values/arrays.xml
index 9ef66b5..23488f4 100644
--- a/res/values/arrays.xml
+++ b/res/values/arrays.xml
@@ -1208,6 +1208,4 @@
         <item>@string/recents_clear_all_bl</item>
     </string-array>
     
-    <string name="category_navbar">Navigation bar</string>
-
 </resources>
diff --git a/res/values/config.xml b/res/values/config.xml
index 71e08f3..476b26e 100755
--- a/res/values/config.xml
+++ b/res/values/config.xml
@@ -55,11 +55,6 @@
     <!-- Show Expanded Desktop preference -->
     <bool name="config_show_expandedDesktop">false</bool>
 
-    <integer name="navigation_bar_height_min_percent">0</integer>
-    <integer name="navigation_bar_height_max_percent">135</integer>
-    <integer name="navigation_bar_width_min_percent">0</integer>
-    <integer name="navigation_bar_width_max_percent">135</integer>
-
     <!-- Multi SIM Tune Away/Priority Subscription Support. Some device RILs do not support this.
          Setting to false will disable Tune Away/Priority Subscription support -->
     <bool name="config_HasTuneAway">false</bool>
diff --git a/res/values/dimens.xml b/res/values/dimens.xml
index d9399b6..2dfdaee 100755
--- a/res/values/dimens.xml
+++ b/res/values/dimens.xml
@@ -99,6 +99,5 @@
 
     <!-- Minimal notification row height used to calculate max notification count -->
     <dimen name="notification_row_min_height">70dp</dimen>
-    <dimen name="navigation_bar_height_default">40dp</dimen>
 
 </resources>
diff --git a/res/values/vanir_strings.xml b/res/values/vanir_strings.xml
index 67a0df3..5e781bc 100755
--- a/res/values/vanir_strings.xml
+++ b/res/values/vanir_strings.xml
@@ -464,13 +464,6 @@
     <string name="add_button">Add button</string>
     <string name="change_layouts_title"> Layout </string>
     <string name="change_layouts_dialog_title">Select a layout to edit</string>
-    <string name="category_navbar">Navigation bar</string>
-    <string name="navbar_tab_arrange">Rearrange</string>
-    <string name="navbar_tab_settings">Settings</string>
-    <string name="navigation_bar_height_text">Bar height in portrait</string>
-    <string name="navigation_bar_height_landscape_text">Bar height in landscape</string>
-    <string name="navigation_bar_width_text">Bar width in landscape</string>
-    <string name="toggle_navbar_title">Show navigation bar</string>
 
     <string name="toggles_arrange_instructions">Rearrange by dragging by the handle on the right. Remove by swiping.</string>
     <string name="save">Save</string>
diff --git a/res/xml/system_ui_settings.xml b/res/xml/system_ui_settings.xml
index f0a5e3c..96956ff 100644
--- a/res/xml/system_ui_settings.xml
+++ b/res/xml/system_ui_settings.xml
@@ -34,18 +34,6 @@
         android:fragment="com.android.settings.vanir.ButtonNavigation"
         android:title="@string/button_navigation_title" />
 
-    <com.android.settings.vanir.VanirPreferenceSwitch
-        android:key="navigation_bar"
-        android:fragment="com.android.settings.vanir.navbar.NavbarTabHostFragment"
-        android:title="@string/category_navbar"
-        android:widgetLayout="@layout/listview_embedded_switchpreference" />
-
-    <com.android.settings.vanir.VanirPreferenceSwitch
-        android:key="navigation_bar_ring"
-        android:fragment="com.android.settings.vanir.NavRingTargets"
-        android:title="@string/category_navring"
-        android:widgetLayout="@layout/listview_embedded_switchpreference" />
-
     <PreferenceCategory
         android:key="userspace_options"
         android:title="@string/userspace_options_title" >
diff --git a/src/com/android/settings/util/HardwareKeyNavbarHelper.java b/src/com/android/settings/util/HardwareKeyNavbarHelper.java
index c77fd1a..3533b5c 100644
--- a/src/com/android/settings/util/HardwareKeyNavbarHelper.java
+++ b/src/com/android/settings/util/HardwareKeyNavbarHelper.java
@@ -33,34 +33,22 @@ import org.cyanogenmod.hardware.KeyDisabler;
 public class HardwareKeyNavbarHelper {
 
     public static boolean shouldShowNavbarToggle() {
-        try {
-            final IWindowManager wm = WindowManagerGlobal.getWindowManagerService();
-            return !wm.needsNavigationBar();
-        } catch (RemoteException e) {
-        }
         return false;
     }
 
     public static boolean shouldShowHardwareNavkeyToggle(Context context) {
-        return KeyDisabler.isSupported() && getNavbarForceEnabled(context);
+        return false;
     }
 
     public static boolean hasNavbar() {
-        try {
-            final IWindowManager wm = WindowManagerGlobal.getWindowManagerService();
-            return wm.hasNavigationBar();
-        } catch (RemoteException e) {
-        }
         return false;
     }
 
     public static boolean getNavbarForceEnabled(Context context) {
-        return Settings.System.getInt(context.getContentResolver(), Settings.System.ENABLE_NAVIGATION_BAR, 0) != 0;
+        return false;
     }
 
     public static void writeEnableNavbarOption(Context context, boolean enabled) {
-        Settings.System.putInt(context.getContentResolver(),
-                Settings.System.ENABLE_NAVIGATION_BAR, enabled ? 1 : 0);
     }
 
     public static void restoreKeyDisabler(Context context) {
-- 
2.5.0

