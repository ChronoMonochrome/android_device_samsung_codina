From 6278f332db27598722a25d77c885b0ea38f6ea25 Mon Sep 17 00:00:00 2001
From: Gianmarco Reverberi <gianmarco.reverberi@gmail.com>
Date: Sun, 1 Nov 2015 12:23:17 +0100
Subject: [PATCH 05/30] Fix NPE in SettingsPreferenceFragment

---
 src/com/android/settings/SettingsPreferenceFragment.java | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/com/android/settings/SettingsPreferenceFragment.java b/src/com/android/settings/SettingsPreferenceFragment.java
index a3d26af8eb..189e0a0e18 100644
--- a/src/com/android/settings/SettingsPreferenceFragment.java
+++ b/src/com/android/settings/SettingsPreferenceFragment.java
@@ -203,8 +203,10 @@ public abstract class SettingsPreferenceFragment extends InstrumentedPreferenceF
     }
 
     public void setPinnedHeaderView(View pinnedHeader) {
-        mPinnedHeaderFrameLayout.addView(pinnedHeader);
-        mPinnedHeaderFrameLayout.setVisibility(View.VISIBLE);
+        if (mPinnedHeaderFrameLayout != null) {
+            mPinnedHeaderFrameLayout.addView(pinnedHeader);
+            mPinnedHeaderFrameLayout.setVisibility(View.VISIBLE);
+        }
     }
 
     @Override
-- 
2.11.0

