From 333aa5729b7cdbe1e8dcbbba0d14ecb5c953d24b Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Wed, 7 Oct 2015 20:49:57 +0300
Subject: [PATCH] remove recovery_from_boot.p target

Change-Id: I03808e8f3265f0f2e1d9a6329ddff62d2795a07c
---
 core/Makefile                | 18 ------------------
 tools/releasetools/common.py |  2 ++
 2 files changed, 2 insertions(+), 18 deletions(-)

diff --git a/core/Makefile b/core/Makefile
index 6fcd394..6712a65 100644
--- a/core/Makefile
+++ b/core/Makefile
@@ -844,24 +844,6 @@ $(BUILT_SYSTEMIMAGE): $(FULL_SYSTEMIMAGE_DEPS) $(INSTALLED_FILES_FILE)
 INSTALLED_SYSTEMIMAGE := $(PRODUCT_OUT)/system.img
 SYSTEMIMAGE_SOURCE_DIR := $(TARGET_OUT)
 
-# The system partition needs room for the recovery image as well.  We
-# now store the recovery image as a binary patch using the boot image
-# as the source (since they are very similar).  Generate the patch so
-# we can see how big it's going to be, and include that in the system
-# image size check calculation.
-ifneq ($(INSTALLED_RECOVERYIMAGE_TARGET),)
-intermediates := $(call intermediates-dir-for,PACKAGING,recovery_patch)
-RECOVERY_FROM_BOOT_PATCH := $(intermediates)/recovery_from_boot.p
-$(RECOVERY_FROM_BOOT_PATCH): $(INSTALLED_RECOVERYIMAGE_TARGET) \
-                             $(INSTALLED_BOOTIMAGE_TARGET) \
-			     $(HOST_OUT_EXECUTABLES)/imgdiff \
-	                     $(HOST_OUT_EXECUTABLES)/bsdiff
-	@echo "Construct recovery from boot"
-	mkdir -p $(dir $@)
-	PATH=$(HOST_OUT_EXECUTABLES):$$PATH $(HOST_OUT_EXECUTABLES)/imgdiff $(INSTALLED_BOOTIMAGE_TARGET) $(INSTALLED_RECOVERYIMAGE_TARGET) $@
-endif
-
-
 $(INSTALLED_SYSTEMIMAGE): $(BUILT_SYSTEMIMAGE) $(RECOVERY_FROM_BOOT_PATCH) | $(ACP)
 	@echo "Install system fs image: $@"
 	$(copy-file-to-target)
diff --git a/tools/releasetools/common.py b/tools/releasetools/common.py
index b992da3..aa2c6d1 100644
--- a/tools/releasetools/common.py
+++ b/tools/releasetools/common.py
@@ -268,6 +268,8 @@ def BuildBootableImage(sourcedir, fs_config_file, info_dict=None):
       not os.access(os.path.join(sourcedir, "kernel"), os.F_OK)):
     return None
 
+  return
+
   if info_dict is None:
     info_dict = OPTIONS.info_dict
 
-- 
1.9.1

