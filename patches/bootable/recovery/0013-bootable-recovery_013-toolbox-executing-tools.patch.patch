From 8dd583292d9c0f36ded0bb2c36bcbc3b1a405a9b Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Sat, 25 Aug 2018 17:11:50 +0300
Subject: [PATCH 13/15] bootable-recovery_013-toolbox-executing-tools.patch

Change-Id: If2a0f1db478f1329984f31b3f06991fedafcf136
---
 toolbox/Android.mk | 20 ++++++++++++--------
 1 file changed, 12 insertions(+), 8 deletions(-)

diff --git a/toolbox/Android.mk b/toolbox/Android.mk
index b8f4d2e7..bf77ba26 100644
--- a/toolbox/Android.mk
+++ b/toolbox/Android.mk
@@ -47,14 +47,18 @@ ifeq ($(TW_USE_TOOLBOX), true)
             $(if $(filter $(PLATFORM_SDK_VERSION), 23 24), du)
 
         OUR_TOOLS := \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; iftop),) \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; ioctl),) \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; nandread),) \
-            newfs_msdos \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; prlimit),) \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; sendevent),) \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; start),) \
-            $(if $(shell test $(PLATFORM_SDK_VERSION) -lt 26; stop),) \
+            newfs_msdos
+
+        ifeq ($(shell test $(PLATFORM_SDK_VERSION) -lt 26; echo $$?),0)
+            OUR_TOOLS += \
+                iftop \
+                ioctl \
+                nandread \
+                prlimit \
+                sendevent \
+                start \
+                stop
+        endif
 
         ifneq (,$(filter $(PLATFORM_SDK_VERSION), 23))
             BSD_TOOLS += \
-- 
2.11.0

