From 06665b3db8d57928b2f800b3a2122a7625ea95a8 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Thu, 4 May 2017 10:26:23 +0300
Subject: [PATCH 5/6] hardware-libhardware_W00-double-tap-wake-gesture.patch

Change-Id: Ic8a7f2cbbe4b7239cb9540530e59548679a9798a
---
 modules/power/Android.mk | 4 ++--
 modules/power/power.c    | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/modules/power/Android.mk b/modules/power/Android.mk
index c868ded..f795a1e 100644
--- a/modules/power/Android.mk
+++ b/modules/power/Android.mk
@@ -18,8 +18,8 @@ include $(CLEAR_VARS)
 
 LOCAL_MODULE := power.default
 LOCAL_MODULE_RELATIVE_PATH := hw
-LOCAL_SRC_FILES := power.c
-LOCAL_SHARED_LIBRARIES := liblog
+LOCAL_SRC_FILES := power.c feature.c
+LOCAL_SHARED_LIBRARIES := liblog libcutils
 LOCAL_MODULE_TAGS := optional
 
 include $(BUILD_SHARED_LIBRARY)
diff --git a/modules/power/power.c b/modules/power/power.c
index 7cacc09..f38de0f 100644
--- a/modules/power/power.c
+++ b/modules/power/power.c
@@ -24,6 +24,7 @@
 
 #include <hardware/hardware.h>
 #include <hardware/power.h>
+#include "feature.h"
 
 static void power_init(struct power_module *module)
 {
@@ -59,4 +60,5 @@ struct power_module HAL_MODULE_INFO_SYM = {
     .init = power_init,
     .setInteractive = power_set_interactive,
     .powerHint = power_hint,
+    .setFeature = set_feature,
 };
-- 
2.5.0

